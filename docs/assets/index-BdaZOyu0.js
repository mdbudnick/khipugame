var s=Object.defineProperty,e=(e,t,a)=>((e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a)(e,"symbol"!=typeof t?t+"":t,a);import{r as t,g as a}from"./phaser-sXZmPM0a.js";!function(){const s=document.createElement("link").relList;if(!(s&&s.supports&&s.supports("modulepreload"))){for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver((s=>{for(const t of s)if("childList"===t.type)for(const s of t.addedNodes)"LINK"===s.tagName&&"modulepreload"===s.rel&&e(s)})).observe(document,{childList:!0,subtree:!0})}function e(s){if(s.ep)return;s.ep=!0;const e=function(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),"use-credentials"===s.crossOrigin?e.credentials="include":"anonymous"===s.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(s);fetch(s.href,e)}}();const i=a(t());class o extends Phaser.GameObjects.Sprite{constructor(s,t,a){super(s,t,a,"hero"),e(this,"_getAnimationName",(function(){let s="stop";return this.body.velocity.y<0?s="jump":this.body.velocity.y>=0&&!this.body.touching.down?s="fall":0!==this.body.velocity.x&&this.body.touching.down&&(s="run"),s})),s.add.existing(this),s.physics.add.existing(this),this.body.setAllowGravity(!0),this.setOrigin(.5,.5),this.body.setCollideWorldBounds=!0,s.add.existing(this),s.physics.add.existing(this),this.anims.create({key:"stop",frames:[0]}),this.anims.create({key:"run",frames:[1,2],frameRate:8,repeat:-1}),this.anims.create({key:"jump",frames:[3]}),this.anims.create({key:"fall",frames:[4]})}move(s){this.body.setVelocityX(200*s),this.body.velocity.x<0?this.setFlipX(!0):this.body.velocity.x>0&&this.setFlipX(!1)}jump(){let s=this.body.blocked.down||this.body.touching.down;return s&&this.body.setVelocityY(-600),s}bounce(){this.body.velocity.y=-200}update(){let s=this._getAnimationName();this.animations.name!==s&&this.animations.play(s)}}class h extends Phaser.GameObjects.Sprite{constructor(s,e,t){super(s,e,t,"spider"),this.anchor.set(.5),this.game.physics.enable(this),this.body.collideWorldBounds=!0,this.body.velocity.x=100,this.animations.add("crawl",[0,1,2],8,!0),this.animations.add("die",[0,4,0,4,0,4,3,3,3,3,3,3],12),this.animations.play("crawl")}update(){this.body.touching.right||this.body.blocked.right?this.body.velocity.x=-h.SPEED:(this.body.touching.left||this.body.blocked.left)&&(this.body.velocity.x=h.SPEED)}die(){this.body.enable=!1,this.animations.play("die").onComplete.addOnce((function(){this.kill()}),this)}}class n extends Phaser.Scene{constructor(){super({key:"play"}),e(this,"LEVEL_COUNT",4)}init(s){this.keys=this.game.input.keyboard.addKeys({left:Phaser.KeyCode.LEFT,right:Phaser.KeyCode.RIGHT,up:Phaser.KeyCode.UP}),this.coinPickupCount=0,this.keys.up.onDown.add((function(){this.hero.jump()&&this.sfx.jump.play()}),this),this.hasKey=0,this.level=(s.level||0)%LEVEL_COUNT}preload(){this.game.load.json("level:0","data/level00.json"),this.game.load.json("level:1","data/level01.json"),this.game.load.json("level:2","data/level02.json"),this.game.load.json("level:3","data/level03.json"),this.game.load.image("font:numbers","assets/images/numbers.png"),this.game.load.image("background","assets/images/background.png"),this.game.load.image("startgame","assets/images/startgame.png"),this.game.load.image("endgame","assets/images/endgame.png"),this.game.load.image("ground","assets/images/ground.png"),this.game.load.image("grass:8x1","assets/images/grass_8x1.png"),this.game.load.image("grass:6x1","assets/images/grass_6x1.png"),this.game.load.image("grass:4x1","assets/images/grass_4x1.png"),this.game.load.image("grass:2x1","assets/images/grass_2x1.png"),this.game.load.image("grass:1x1","assets/images/grass_1x1.png"),this.game.load.image("invisible-wall","assets/images/invisible_wall.png"),this.game.load.image("icon:coin","assets/images/coin_icon.png"),this.game.load.spritesheet("key","assets/images/key01.png",60,30),this.game.load.spritesheet("badkey","assets/images/badkey01.png",60,30),this.game.load.spritesheet("coin","assets/images/coin_animated.png",22,22),this.game.load.spritesheet("spider","assets/images/spider.png",43,32),this.game.load.spritesheet("hero","assets/images/hero.png",36,42),this.game.load.spritesheet("door","assets/images/door.png",42,66),this.game.load.spritesheet("icon:key","assets/images/key_icon.png",34,30),this.game.load.audio("sfx:jump","assets/audio/jump.wav"),this.game.load.audio("sfx:coin","assets/audio/coin.wav"),this.game.load.audio("sfx:stomp","assets/audio/stomp.wav"),this.game.load.audio("sfx:key","assets/audio/key.wav"),this.game.load.audio("sfx:door","assets/audio/door.wav"),this.game.load.audio("sfx:bgm",["assets/audio/bgm.mp3","assets/audio/bgm.ogg"])}create(){this.sfx={jump:this.game.add.audio("sfx:jump"),coin:this.game.add.audio("sfx:coin"),stomp:this.game.add.audio("sfx:stomp"),key:this.game.add.audio("sfx:key"),door:this.game.add.audio("sfx:door"),bgm:this.game.add.audio("sfx:bgm")},this.sfx.bgm.loopFull(),this.game.add.image(0,0,"background"),this._loadLevel(this.game.cache.getJSON(`level:${this.level}`)),this._createHud()}update(){this._handleCollisions(),this._handleInput(),this.coinFont.text=`x${this.coinPickupCount}`,this.keyFont.text=`x${this.hasKey}`,this.keyNum=this.game.cache.getJSON(`level:${this.level}`).keyz.length,this.keyIcon.frame=this.hasKey===this.keyNum?1:0,this.hasKey===this.keyNum&&(this.door.frame=1),this.coinsInLevel=this.game.cache.getJSON(`level:${this.level}`).coins.length,this.coinPickupCount===this.coinsInLevel&&this._revealClues()}shutdown(){this.sfx.bgm.stop()}_revealClues(){this.badkeyz.destroy()}_handleCollisions(){this.game.physics.arcade.collide(this.spiders,this.platforms),this.game.physics.arcade.collide(this.spiders,this.enemyWalls),this.game.physics.arcade.collide(this.hero,this.platforms),this.game.physics.arcade.overlap(this.hero,this.coins,this._onHeroVsCoin,null,this),this.game.physics.arcade.overlap(this.hero,this.spiders,this._onHeroVsEnemy,null,this),this.game.physics.arcade.overlap(this.hero,this.keyz,this._onHeroVsKey,null,this),this.game.physics.arcade.overlap(this.hero,this.badkeyz,this._onHeroVsBadKey,null,this),this.game.physics.arcade.overlap(this.hero,this.door,this._onHeroVsDoor,(function(s,e){return this.hasKey===this.keyNum&&s.body.touching.down}),this)}_handleInput(){this.keys.left.isDown?this.hero.move(-1):this.keys.right.isDown?this.hero.move(1):this.hero.move(0)}_loadLevel(s){this.bgDecoration=this.game.add.group(),this.platforms=this.game.add.group(),this.coins=this.game.add.group(),this.spiders=this.game.add.group(),this.enemyWalls=this.game.add.group(),this.enemyWalls.visible=!1,this.keyz=this.game.add.group(),this.badkeyz=this.game.add.group(),s.platforms.forEach(this._spawnPlatform,this),this._spawnCharacters({hero:s.hero,spiders:s.spiders}),s.coins.forEach(this._spawnCoin,this),this._spawnDoor(s.door.x,s.door.y),s.keyz.forEach(this._spawnKey,this),s.badkeyz.forEach(this._spawnBadKey,this),this.game.physics.arcade.gravity.y=1200}_spawnPlatform(s){let e=this.platforms.create(s.x,s.y,s.image);this.game.physics.enable(e),e.body.allowGravity=!1,e.body.immovable=!0,this._spawnEnemyWall(s.x,s.y,"left"),this._spawnEnemyWall(s.x+e.width,s.y,"right")}_spawnEnemyWall(s,e,t){let a=this.enemyWalls.create(s,e,"invisible-wall");a.anchor.set("left"===t?1:0,1),this.game.physics.enable(a),a.body.immovable=!0,a.body.allowGravity=!1}_spawnCharacters(s){s.spiders.forEach((function(s){let e=new h(this.game,s.x,s.y);this.spiders.add(e)}),this),this.hero=new o(this.game,s.hero.x,s.hero.y),this.game.add.existing(this.hero)}_spawnCoin(s){let e=this.coins.create(s.x,s.y,"coin");e.anchor.set(.5,.5),this.game.physics.enable(e),e.body.allowGravity=!1,e.animations.add("rotate",[0,1,3,2],4,!0),e.animations.play("rotate")}_spawnDoor(s,e){this.door=this.bgDecoration.create(s,e,"door"),this.door.anchor.setTo(.5,1),this.game.physics.enable(this.door),this.door.body.allowGravity=!1}_spawnKey(s){let e=this.keyz.create(s.x,s.y,"key",s.frame);this.game.physics.enable(e),e.body.allowGravity=!1,e.body.immovable=!0,e.anchor.set(.5,.5),this.keyz.y-=3,this.game.add.tween(this.keyz).to({y:this.keyz.y+6},800,Phaser.Easing.Sinusoidal.InOut).yoyo(!0).loop().start()}_spawnBadKey(s){let e=this.badkeyz.create(s.x,s.y,"badkey",s.frame);this.game.physics.enable(e),e.body.allowGravity=!1,e.body.immovable=!0,e.anchor.set(.5,.5),this.badkeyz.y-=3,this.game.add.tween(this.badkeyz).to({y:this.badkeyz.y+6},800,Phaser.Easing.Sinusoidal.InOut).yoyo(!0).loop().start()}_onHeroVsCoin(s,e){this.sfx.coin.play(),e.kill(),this.coinPickupCount++}_onHeroVsEnemy(s,e){s.body.velocity.y>0?(s.bounce(),e.die(),this.sfx.stomp.play()):(this.sfx.stomp.play(),this.game.state.restart(!0,!1,{level:this.level}))}_onHeroVsKey(s,e){this.sfx.key.play(),e.kill(),this.hasKey++}_onHeroVsBadKey(s,e){this.sfx.stomp.play(),e.kill(),this.game.state.restart(!0,!1,{level:this.level})}_onHeroVsDoor(s,e){this.sfx.door.play(),3===this.level?(this.game.state.add("end",EndGameState),this.game.state.start("end",!0,!1,"start0")):this.game.state.restart(!0,!1,{level:this.level+1})}_createHud(){const s="0123456789X ";this.coinFont=this.game.add.retroFont("font:numbers",20,26,s,6);let e=this.game.make.image(0,59,"icon:coin"),t=this.game.make.image(e.x+e.width,e.y+e.height/2,this.coinFont);t.anchor.set(0,.5),this.keyFont=this.game.add.retroFont("font:numbers",20,26,s,6),this.keyIcon=this.game.make.sprite(0,19,"icon:key");let a=this.game.make.image(this.keyIcon.x+e.width,this.keyIcon.y+this.keyIcon.height/2,this.keyFont);a.anchor.set(0,.5),this.hud=this.game.add.group(),this.hud.add(e),this.hud.add(t),this.hud.add(this.keyIcon),this.hud.add(a),this.hud.position.set(10,10)}}class d extends i.Scene{constructor(){super({key:"MainMenu"})}init(s){this.keys=this.input.keyboard.addKeys({left:i.Input.Keyboard.KeyCodes.LEFT,right:i.Input.Keyboard.KeyCodes.RIGHT,up:i.Input.Keyboard.KeyCodes.UP})}preload(){this.load.json("start0","data/start0.json"),this.load.image("startgame","assets/images/startgame.jpg"),this.load.image("ground","assets/images/ground.png"),this.load.image("grass:6x1","assets/images/starttile.png"),this.load.image("encuesta","assets/images/encuesta.png"),this.load.image("instagram","assets/images/instagramlogo.png"),this.load.image("facebook","assets/images/facebooklogo.png"),this.load.spritesheet("hero","assets/images/hero.png",{frameWidth:36,frameHeight:42}),this.load.audio("sfx:jump","assets/audio/jump.wav"),this.load.audio("sfx:coin","assets/audio/coin.wav")}_openForm(){window.open("https://forms.gle/gW5an78GgXbbZtas9","_blank")}_openInsta(){window.open("https://www.instagram.com/kuychiproject/","_blank")}_openFace(){window.open("https://www.facebook.com/Kuychi-435800183533124/","_blank")}create(){this.sfx={jump:this.sound.add("sfx:jump"),coin:this.sound.add("sfx:coin")},this.add.image(480,300,"startgame"),this._loadLevel(this.cache.json.get("start0")),this.add.image(855,45,"encuesta").setInteractive({useHandCursor:!0}).on("pointerdown",this._openForm),this.add.image(855,145,"instagram").setInteractive({useHandCursor:!0}).on("pointerdown",this._openInsta),this.add.image(855,245,"facebook").setInteractive({useHandCursor:!0}).on("pointerdown",this._openFace)}update(){this._handleInput()}_handleInput(){i.Input.Keyboard.JustDown(this.keys.up)&&this.hero.jump()&&this.sfx.jump.play(),this.keys.left.isDown?this.hero.move(-1):this.keys.right.isDown?this.hero.move(1):this.hero.move(0)}_loadLevel(s){this.platforms=this.add.group(),this.coins=this.add.group(),s.platforms.forEach(this._spawnPlatform,this),s.coins.forEach(this._spawnCoin,this),this._spawnCharacters({hero:s.hero}),this.physics.add.collider(this.hero,this.platforms),this.physics.add.collider(this.hero,this.coins,this._onHeroVsCoin,null,this)}_spawnPlatform(s){let e=this.platforms.create(s.x,s.y,s.image);e=this.physics.add.existing(e),e.body.setAllowGravity(!1),e.body.setImmovable(!0)}_spawnCoin(s){let e=this.coins.create(s.x,s.y,s.image);this.physics.add.existing(e).body.setAllowGravity(!1)}_spawnCharacters(s){this.hero=new o(this,s.hero.x,s.hero.y)}_onHeroVsCoin(s,e){this.sfx.coin.play(),e.destroy(),this.scene.start("play")}shutdown(){}}class r extends Phaser.Scene{constructor(){super({key:"EndGame"})}init(s){this.game.renderer.renderSession.roundPixels=!0,this.keys=this.game.input.keyboard.addKeys({left:Phaser.KeyCode.LEFT,right:Phaser.KeyCode.RIGHT,up:Phaser.KeyCode.UP}),this.keys.up.onDown.add((function(){this.hero.jump()&&this.sfx.jump.play()}),this)}preload(){this.game.load.json("start0","data/start0.json"),this.game.load.image("endgame","assets/images/endgame.jpg"),this.game.load.image("ground","assets/images/ground.png"),this.game.load.image("button","assets/images/encuesta.png"),this.game.load.image("button1","assets/images/restarttile.png"),this.game.load.spritesheet("hero","assets/images/hero.png",36,42),this.game.load.audio("sfx:jump","assets/audio/jump.wav"),this.game.load.audio("sfx:platform","assets/audio/coin.wav")}openWindow(){window.open("https://forms.gle/gW5an78GgXbbZtas9","_blank")}restartGame(){this.game.state.start("main",!0,!1,"start0")}create(){this.sfx={jump:this.game.add.audio("sfx:jump")},this.game.add.image(0,0,"endgame"),this._loadLevel(this.game.cache.getJSON("start0")),this.game.add.button(450,240,"button",openWindow,this),buttonWeb.input.useHandCursor=!0,this.game.add.button(400,340,"button1",restartGame,this)}update(){this._handleCollisions(),this._handleInput()}_handleCollisions(){this.game.physics.arcade.collide(this.hero,this.platforms)}_handleInput(){this.keys.left.isDown?this.hero.move(-1):this.keys.right.isDown?this.hero.move(1):this.hero.move(0)}_loadLevel(s){this.platforms=this.game.add.group(),s.platforms.forEach(this._spawnPlatform,this),this._spawnCharacters({hero:s.hero})}_spawnPlatform(s){let e=this.platforms.create(s.x,s.y,s.image);this.game.physics.enable(e),e.body.allowGravity=!1,e.body.immovable=!0}_spawnCoin(s){let e=this.coin.create(s.x,s.y,s.image);this.game.physics.enable(e),e.body.allowGravity=!1,e.body.immovable=!0}_spawnCharacters(s){this.hero=new o(this.game,s.hero.x,s.hero.y),this.game.add.existing(this.hero)}shutdown(){}}const l={width:960,height:600,scale:{autoCenter:i.Scale.CENTER_BOTH},autoRound:!1,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{y:1200},debug:!0}},scene:[d,n,r]};new i.Game(l);
